<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>

<body>
	<div layout:fragment="content" class="content content1">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

		<div class="modal fade" id="heartModal" data-bs-toggle="modal" tabindex="-1">
		  <div class="modal-dialog modal-sm modal-dialog-centered">
		    <div class="modal-content">
		      <div class="modal-body">
		      	<div id="heartMsg" class="text-center"></div>
		      </div>
		    </div>
		  </div>
		</div>


		<div class="container py-5">
			<div class="row mb-2">
				<div class="col-5">
					<button onclick="javascript:history.back(-1);" class="btn btn-light">뒤로가기</button>
				</div>
			</div>
			
			<form th:action="@{/food/updateProcess}" method="post" enctype="multipart/form-data" id="frmFoodUpdate" onsubmit="return false;">
			<input type="hidden" id="f_seq" name="f_seq" th:value="${foodInfo.f_seq}" />
			<input type="hidden" id="f_code" name="f_code" th:value="${foodInfo.f_code}" />
			<div class="row mb-5">
				
				<div class="col-12 col-lg-4">
					<div class="row">
						<div class="col-12 mb-2">
							<img class="rounded-5 d-flex bg-light align-items-center justify-content-center mb-2 text-muted small img-fluid" id="f_image_preview" th:src="@{${foodInfo.f_image}}" />
							<input type="file" class="form-control" id="f_image" name="f_image" />
							<span class="text-muted small">이미지를 등록하지 않으면 기존의 이미지가 유지됩니다.</span>
							<input type="hidden" id="f_image_original" name="f_image_original" th:value="${foodInfo.f_image}" />
						</div>
					</div>
				</div>
				
				
				<div class="col-12 col-lg-8">
				
					<div class="row">
						<div class="col">
							<div class="form-floating mb-2">
								<input type="text" class="form-control fw-bold border border-5 border-primary" name="f_name" id="f_name" placeholder="음식명" th:value="${foodInfo.f_name}" />
								<label for="f_name">음식명</label>
							</div>
						</div>
					</div>
					
					
					<div class="row mb-4">
						<div class="col-12">
							<h3 class="fs-5 fw-bold bg-light py-2 px-3 rounded-5 border border-light mb-2">키워드</h3>
						</div>
						<div class="col-12 mb-2">
							<hr class="hr2" />
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeK" value="K" th:checked="${foodInfo.f_type_theme == 'K'}">
								<label class="form-check-label" for="f_type_themeK">한식</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeU" value="U" th:checked="${foodInfo.f_type_theme == 'U'}">
								<label class="form-check-label" for="f_type_themeU">양식</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeC" value="C" th:checked="${foodInfo.f_type_theme == 'C'}">
								<label class="form-check-label" for="f_type_themeC">중식</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeJ" value="J" th:checked="${foodInfo.f_type_theme == 'J'}">
								<label class="form-check-label" for="f_type_themeJ">일식</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeD" value="D" th:checked="${foodInfo.f_type_theme == 'D'}">
								<label class="form-check-label" for="f_type_themeD">디저트</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_theme" id="f_type_themeE" value="E" th:checked="${foodInfo.f_type_theme == 'E'}">
								<label class="form-check-label" for="f_type_themeE">기타</label>
							</div>
							<hr class="hr2" />
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainR" value="R" th:checked="${foodInfo.f_type_main == 'R'}">
								<label class="form-check-label" for="f_type_mainR">밥</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainB" value="B" th:checked="${foodInfo.f_type_main == 'B'}">
								<label class="form-check-label" for="f_type_mainB">빵</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainN" value="N" th:checked="${foodInfo.f_type_main == 'N'}">
								<label class="form-check-label" for="f_type_mainN">면</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainM" value="M" th:checked="${foodInfo.f_type_main == 'M'}">
								<label class="form-check-label" for="f_type_mainM">고기</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainS" value="S" th:checked="${foodInfo.f_type_main == 'S'}">
								<label class="form-check-label" for="f_type_mainS">해산물</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_main" id="f_type_mainV" value="V" th:checked="${foodInfo.f_type_main == 'V'}">
								<label class="form-check-label" for="f_type_mainV">채소</label>
							</div>
							<hr class="hr2" />
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_soup" id="f_type_soupY" value="Y" th:checked="${foodInfo.f_type_soup == 'Y'}">
								<label class="form-check-label" for="f_type_soupY">국물있음</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_soup" id="f_type_soupN" value="N" th:checked="${foodInfo.f_type_soup == 'N'}">
								<label class="form-check-label" for="f_type_soupN">국물없음</label>
							</div>
							<hr class="hr2" />
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_spicy" id="f_type_spicyY" value="Y" th:checked="${foodInfo.f_type_spicy == 'Y'}">
								<label class="form-check-label" for="f_type_spicyY">매움</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="f_type_spicy" id="f_type_spicyN" value="N" th:checked="${foodInfo.f_type_spicy == 'N'}">
								<label class="form-check-label" for="f_type_spicyN">안매움</label>
							</div>
							<hr class="hr2" />
						</div>
					</div>
					
					<div class="row mb-4">
						<div class="col-12">
							<h3 class="fs-5 fw-bold bg-light py-2 px-3 rounded-5 border border-light mb-2">재료</h3>
						</div>
						<div class="col-12 col-lg-4 mb-2">
							상품 분류
							<select class="form-select" name="p_category" id="p_category">
								<option value="" selected disabled>재료 분류를 선택해주세요</option>
								<option value="수산/건어물">수산/건어물</option>
								<option value="야채/채소">야채/채소</option>
								<option value="축산/계란">축산/계란</option>
								<option value="소스/양념/조미료">소스/양념/조미료</option>
								<option value="가공식품">가공식품</option>
								<option value="유제품">유제품</option>
								<option value="과일류">과일류</option>
								<option value="곡류/견과류">곡류/견과류</option>
							</select>
						</div>
						<div class="col-6 col-lg-4 mb-2">
							상품 선택
							<select class="form-select" name="productList" id="productList">
							</select>
						</div>
						<div class="col-6 col-lg-4 mb-2">
							용량
							<div class="input-group">
								<input type="text" class="form-control" id="f_volume" name="f_volume" />
								<button type="button" class="btn btn-light" id="btnIngredientAdd">추가</button>
							</div>
						</div>
						<div class="col-12" id="ingredientList">
							<span class="d-inline-block border border-light rounded-5 py-1 px-3 me-2 ingredientParent" th:each="cnt, stat : ${#numbers.sequence(1, {productCnt})}">
								<span class="ingredientCode" th:data-pcode="${pCodeList[stat.index]}" th:text="${pNameList[stat.index]}"></span>
								<span class="ingredientVolume" th:data-fvolume="${fVolumeList[stat.index]}" th:text="${fVolumeList[stat.index]}"></span>
								<span class="ingredientDel text-primary" th:idx="${stat.index}" role="button">X</span>
							</span>
						</div>
						<input type="hidden" name="f_code_arr" id="f_code_arr" />
						<input type="hidden" name="f_volume_arr" id="f_volume_arr" />
					</div>
					
					
					<div class="row mb-4">
						<div class="col-12">
							<h3 class="fs-5 fw-bold bg-light py-2 px-3 rounded-5 border border-light mb-2">조리순서
								<span class="text-muted xsmall">'추가' 버튼으로 조리 순서를 추가 해주세요</span>
							</h3>
						</div>
						<div class="col-12">
							<div class="input-group">
								<input type="text" class="form-control" id="f_recipe" name="f_recipe" />
								<button type="button" class="btn btn-light" id="btnRecipeAdd">추가</button>
							</div>
						</div>
						<div class="col-12" id="recipeList">
							<div class="row recipeParent" th:each="recipe, recipeStat : ${recipeList}">
								<div class="col-12 p-3">
									<div class="rounded-5 bg-primary text-white px-3 mb-2 d-inline-block recipeNum" th:text="${recipeStat.count}"></div>
									<span class="recipeDel text-primary ms-3" th:idx="${recipeStat.index}" role="button">X</span>
									<div class="recipeItem" th:text="${recipe}"></div>
								</div>
							</div>
						</div>
						<textarea class="d-none" name="f_recipe"></textarea>
					</div>
					
					
					<div class="row mb-5">
						<div class="col-12 text-center">
							<input type="submit" class="btn btn-primary" id="btnRecipeAddDone" value="레시피 등록하기">
							<button class="btn btn-secondary" onclick="javascript:history.back(-1);">취소</button>
						</div>
					</div>
					
				</div>
			</div>
			</form>
			
			<div id="btnTop">
		    	<i class="fa-solid fa-arrow-up"></i>
		    </div>
			
			<script th:src="@{/js/foodUpdate.js}"></script>

		</div>
</body>
</html>