<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>

<body>
	<div layout:fragment="content" class="content content1">
		<link rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
		<script src="https://code.jquery.com/jquery-3.7.1.js"
			integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
			crossorigin="anonymous"></script>

		<script
			src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

		<style>
* {
	margin: 0;
	padding: 0;
	list-style: none;
	box-sizing: border-box;
}

html, body {
	position: relative;
	height: 100%;
	background-color: white;
/* 	overflow-x: hidden; */
}
    .container {
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
    }

.R_row, .btnDiv {
	position: relative;
	padding: 0;
}
.Maintit {
	margin: 30px 0;
	font-size: 20px;
	font-weight: bold;
}


.M_category {
	border: 1px solid lightgray;
	padding: 5px;
	border-radius: 10px;
	margin: 2px 2px;
	display: inline-block;
}

.card {
	display: none;
	min-height: auto;
}

.card-text {
	white-space: nowrap;
	overflow-x: auto;
	display: flex;
}

.card-text::-webkit-scrollbar {
	width: 5px; /* ìŠ¤í¬ë¡¤ë°”ì˜ ë„ˆë¹„ */
	height: 3px; /* ìˆ˜í‰ ìŠ¤í¬ë¡¤ë°”ì˜ ë†’ì´ */
}

.card-text::-webkit-scrollbar-track {
	background: #f1f1f1; /* ìŠ¤í¬ë¡¤ë°” íŠ¸ë™ì˜ ë°°ê²½ìƒ‰ */
}

.card-text::-webkit-scrollbar-thumb {
	background: #888; /* ìŠ¤í¬ë¡¤ë°” ì¸ì˜ ë°°ê²½ìƒ‰ */
}

.card-text::-webkit-scrollbar-thumb:hover {
	background: #555; /* ìŠ¤í¬ë¡¤ë°” ì¸ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œì˜ ë°°ê²½ìƒ‰ */
}

.card.show {
	display: block;
}

.card-title {
	font-weight: bold;
	white-space: nowrap;
	overflow-x: auto;
	font-size:15px;
}

.card-title::-webkit-scrollbar {
	width: 0; /* ìŠ¤í¬ë¡¤ë°”ì˜ ë„ˆë¹„ */
	height: 0; /* ìˆ˜í‰ ìŠ¤í¬ë¡¤ë°”ì˜ ë†’ì´ */
}

.card-img-top {
	width: 100%; /* ì´ë¯¸ì§€ë¥¼ ë¶€ëª¨ ìš”ì†Œì˜ ê°€ë¡œ í­ì— ë§ì¶¤ */
	height: auto; /* ë†’ì´ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë¹„ìœ¨ ìœ ì§€ */
	object-fit: cover; /* ì´ë¯¸ì§€ ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ê½‰ ì±„ì›€ */
	aspect-ratio: 6/9; /* ì´ë¯¸ì§€ì˜ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ì„ 4:3ìœ¼ë¡œ ì„¤ì • */
}

.R_btn {
	margin-top: 50px;
	font-weight: bold;
	font-size: 20px;
	width: 200px;
	height: 50px;
	border-radius: 10px;
}

.R_btn:hover {
	background-color: black;
	color: white;
}

.btnDiv {
	display: flex;
	justify-content: center;
    align-items: center;
}

.M_trailer {
	width: 80%;
	border: 1px solid rgb(219, 219, 219);
	margin: 50px 0 100px 0;
	border-radius: 10px;
}

.M_trailer iframe {
	border-radius: 10px;
}

.M_trailer_text {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	text-align: center;
}

.M_trailer_text h2 {
	font-size: 25px;
}

.M_trailer_btn {
	width: 150px;
	height: 40px;
	border: none;
	border-radius: 10px;
	background-color: #f67676;
	color: white;
	font-weight: bold;
	margin-bottom:10px;
}

@media screen and (max-width: 768px) {
	.btnDiv {
		justify-content: center;
		margin: 0;
	}
	.card {
		display: none;
		min-height: auto;
	}
	.card-title {
		font-size: 14px;
	}
	.card-text {
		white-space: nowrap;
		overflow-x: auto;
	}
	.card-text, .see-more {
		font-size: 8px;
		margin: 0;
	}
}
</style>


<div class="container">
    <div class="row R_row">
        <div class="col-12">
            <div class="row">
                <h1 class="Maintit">í‚¤ì›Œë“œ ì¶”ì²œ ê³µì—°</h1>
		        <p class="text-end mb-2">
		        	<input type="hidden" id="b_seq" th:value="${boardInfo.b_seq}">
					<button type="button" class="btn btn-sm btn-secondary" th:if="${boardInfo.b_share_yn == 'N'}" id="b_share_y">ê³µìœ í•˜ê¸°</button>
					<button type="button" class="btn btn-sm btn-primary" th:if="${boardInfo.b_share_yn == 'Y'}" id="b_share_n">ê³µìœ ì·¨ì†Œ</button>
				</p>
                <hr />
                <!-- <div th:text="|ì´ ê°¯ìˆ˜ : ${totalCount}|"></div> -->

						<!-- =======================================ì¹´ë“œí•˜ë‚˜=============================================== -->
						<div class="col-6 col-md-6 col-lg-4 col-xl-2"
							th:each="list : ${list}">
							<div class="card border">
								<a th:href="@{/show/view(s_code=${list.s_code})}"> <img
									th:src="${list.s_image_post}" class="card-img-top" alt="..." />
								</a>
								<div class="card-body">
									<h5 class="card-title" th:text="${list.s_title}"></h5>
									<div class="card-text text-muted small">
										<div th:each="genreList : ${list.g_name_arr}">
											<span class="M_category" th:text="${genreList.g_name}"></span>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row btnDiv">
				<div class="col text-center">
				<button class="btn btn-primary btn-sm mb-5 mt-5" id="loadMore">
						ë”ë³´ê¸°</button>
				</div>
			</div>

			<script>
        $(document).ready(function () {
            // ì´ˆê¸°ì— í‘œì‹œí•  ì¹´ë“œ ìˆ˜
            var initialCards = 12;
            var cards = $(".card");
            var totalCards = cards.length;

            // ì´ˆê¸° ì¹´ë“œ í‘œì‹œ
            cards.slice(0, initialCards).addClass("show mb-2");


            // "ë”ë³´ê¸°" ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            $("#loadMore").click(function (e) {
                e.preventDefault();
                var visibleCards = $(".card.show").length;
                // ì¶”ê°€ë¡œ ë³´ì—¬ì¤„ ì¹´ë“œ ìˆ˜
                var next = visibleCards + 6; // ë‹¤ìŒì— ë³´ì—¬ì§ˆ ì¹´ë“œ ìˆ˜, ì¡°ì • ê°€ëŠ¥
                cards.slice(visibleCards, next).addClass("show");
                $(".card.show").addClass("mb-2");
                // ëª¨ë“  ì¹´ë“œê°€ í‘œì‹œëœ ê²½ìš° "ë”ë³´ê¸°" ë²„íŠ¼ ìˆ¨ê¹€
                if (next >= totalCards) {
                    $(this).hide();
                }
            });

            // ëª¨ë“  ì¹´ë“œê°€ ì²˜ìŒë¶€í„° ë³´ì´ë©´ "ë”ë³´ê¸°" ë²„íŠ¼ ìˆ¨ê¹€
            if (totalCards <= initialCards) {
                $("#loadMore").hide();
            }
            
            let b_seq = $("#b_seq").val();
        	
        	$("#b_share_y").on("click", function(){
        		$.ajax({
        			url : "/board/updateShare",
        			data : {"b_seq" : b_seq, "b_share_yn" : 'Y'},
        			type : "post",
        			success : function(){
        				$(location).prop("href", location.href);
        			}
        		})
        	})
        	
        	$("#b_share_n").on("click", function(){
        		$.ajax({
        			url : "/board/updateShare",
        			data : {"b_seq" : b_seq, "b_share_yn" : 'N'},
        			type : "post",
        			success : function(){
        				$(location).prop("href", location.href);
        			}
        		})
        	})
        });
    </script>

			<div class="row M_trailer">
				<div class="col-md-6 col-12 p-0">
					<div class="ratio ratio-16x9">
						<iframe src="https://www.youtube.com/embed/rjW9E1BR_30"
							title="í—˜í•œ ê²ƒì´ ë‚˜ì™”ë‹¤ğŸ” [íŒŒë¬˜] 1ì°¨ ì˜ˆê³ í¸" frameborder="0"
							allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
							allowfullscreen></iframe>
					</div>
				</div>
				<div class="col-md-6 col-12 p-0 M_trailer_text">
					<h2>[íŒŒë¬˜] 1ì°¨ ì˜ˆê³ í¸</h2>
					<p>
						<ê²€ì€ ì‚¬ì œë“¤>, <ì‚¬ë°”í•˜>, ê·¸ë¦¬ê³  ì‹ ì‘. <br />
						ì¥ì¬í˜„ ì‹ ì‘ì€ í•­ìƒ ê¸°ë‹¤ë ¤ì§„ë‹¤. <br />
						2ì›” 22ì¼ ê°œë´‰. 
					</p>
					<button class="M_trailer_btn">ìƒì„¸ë³´ê¸°</button>
				</div>
			</div>
		</div>
					    <div id="btnTop">
		    	<i class="fa-solid fa-arrow-up"></i>
		    </div>
	</div>
</body>
</html>