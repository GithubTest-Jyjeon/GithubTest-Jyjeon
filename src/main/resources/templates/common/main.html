<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>살거리 메인</title>
</head>

<body>
	<div layout:fragment="content">

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
		<link rel="stylesheet" type="text/css" th:href="@{/css/main.css}" />

		<div class="container py-4">
    <div class="row">
        <div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto">
            <form th:action="@{/food/search}" method="get" name="frmSearch" onsubmit="return validateForm()">
                <input type="hidden" name="p_category" value="" />
                <div class="input-group mb-2">
                    <div class="form-floating">
                        <input type="text" class="form-control border-3 border-primary" id="f_name" name="f_name" th:value="${f_name}" placeholder="먹거리를 검색해보세요">
                        <label for="f_name">먹거리를 검색해보세요</label>
                    </div>
                    <input type="submit" class="input-group-text bg-primary border-3 border-primary text-white" role="button" value="검색" />
                </div>
            </form>
            <div class="row">
                <div class="col text-truncate">
                    <a class="mx-2 small text-secondary text-decoration-none" th:each="item : ${randomSearchFoods}" th:text="|#${item.f_name}|" th:href="@{/food/view(f_code=${item.f_code})}">
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function validateForm() {
        var x = document.forms["frmSearch"]["f_name"].value;
        if (x == "") {
            alert("검색어를 입력해주세요!");
            return false;
        }
        return true;
    }
</script>


		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="row border-top border-start">
						<div class="col-6 col-md-3 border-end border-bottom" th:each="category : ${category_arr}">
							<a th:href="@{/product/list(p_category=${category})}" th:text="${category}"
								class="text-decoration-none text-secondary d-flex py-2 justify-content-center"></a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<div class="row">
				<div class="col g-0">
					<div class="swiper MainSwiper mb-5">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<!-- lg 이상에서만 보이는 이미지 -->
								<img src="/img/main1.jpg" alt="" class="img-fluid d-none d-lg-block" />

								<!-- lg 이하에서만 보이는 이미지 -->
								<img src="/img/main11.png" alt="" class="img-fluid d-lg-none" />

								<div class="container position-absolute top-50 start-50 translate-middle">
									<div class="row">
										<div class="col mainC_Text">
											<h1>Choose together!</h1>
											<p>뭐 먹을지 고민일 때</p>
											<p>츄겟과 함께 메뉴를 선택해봐요!</p>											
											<a aria-current="page" th:href="@{/keyword/choice?type=food}">
												<button class="logincheck btn btn-primary">키워드 선택하러 가기</button>
											</a>
										</div>
									</div>
								</div>
							</div>
							<div class="swiper-slide">
								<img src="/img/main2.jpg" alt="" class="img-fluid" />
								<div class="container position-absolute top-50 start-50 translate-middle">
									<div class="row">
										<div class="col mainC_Text">
											<h1>Choose together!</h1>
											<p>신선하고 건강한 재료를</p>
											<p>나의 레시피에 맞게 주문!</p>
											<a aria-current="page" th:href="@{/product/index}">
												<button class="logincheck btn btn-primary">쇼핑하러 가기</button>
											</a>
										</div>
									</div>
								</div>
							</div>
							<!--<div class="swiper-slide">
								<img
									src="https://jangfood1.hgodo.com/shop/external/fix/IMG_BANNER/914/20230310125548-f87-9dde5dcb79c5.jpg"
									alt="" class="img-fluid pc_banner d-none d-sm-block" /> <img
									src="https://jangfood1.hgodo.com/shop/external/fix/IMG_BANNER/914/20230310125607-cbd-a95e65edd7e8.jpg"
									alt="" class="img-fluid m_banner d-sm-none" />
							</div>-->
							<div class="swiper-slide">
								<img src="/img/main18.jpg" alt="" class="img-fluid" />
								<div class="container position-absolute top-50 start-50 translate-middle">
									<div class="row">
										<div class="col mainC_Text">
											<h1>Choose together!</h1>
											<p>먹으면서 뭐 볼까? </p>
											<p>나의 취향에 맞게 볼거리 추천!</p>
											<a aria-current="page" th:href="@{/keyword/choice?type=work}">
												<button class="logincheck btn btn-primary">키워드 선택하러 가기</button>
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="swiper-pagination"></div>
						<div class="swiper-button-next"></div>
						<div class="swiper-button-prev"></div>
					</div>
				</div>
			</div>
		</div>

		<div class="container mb-5">
			<div class="row">
				<div class="col-12">
					<h3>인기 먹거리</h3>
					<hr />
					<div class="row">
						<div class="col-6 col-md-4 col-lg-4 col-xl-3 mb-2" th:each="food : ${randomFoods}">
							<input type="hidden" class="f_seq" th:value="${food.f_seq}" />
							<div class="card border border-light h-100">
								<a th:href="@{/food/view(f_code=${food.f_code})}">
									<img th:src="@{${food.f_image}}" class="card-img-top" alt="..."
										style="object-fit: cover;" />
								</a>
								<div class="card-body">
									<div class="card-title pb-1 border-bottom border-light">
										<a th:href="@{/food/view(f_code=${food.f_code})}"
											class="text-dark text-decoration-none">
											<span class="fs-5" th:text="${food.f_name}"></span>
										</a>
									</div>
									<div class="card-text text-muted small">
										<div class="pb-2 text-truncate">
											<span th:text="${food.f_recipe}"></span>
										</div>
										<div class="text-muted">
											<p>
												<i class="fa-solid fa-heart text-primary"></i> <span class="f_heart me-2"></span>
												<i class="fa-solid fa-comment text-secondary"></i> <span class="f_reply"></span>
											</p>
										</div>
										<div>
											<span class="R_category" th:if="${food.f_type_theme == 'K'}"
												th:text="|#한식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'U'}"
												th:text="|#양식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'C'}"
												th:text="|#중식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'J'}"
												th:text="|#일식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'E'}"
												th:text="|#기타|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'D'}"
												th:text="|#디저트|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'R'}"
												th:text="|#밥|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'B'}"
												th:text="|#빵|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'N'}"
												th:text="|#면|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'M'}"
												th:text="|#육류|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'S'}"
												th:text="|#해산물|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'V'}"
												th:text="|#채식|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'Y'}"
												th:text="|#국물있음|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'N'}"
												th:text="|#국물없음|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'Y'}"
												th:text="|#매움|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'N'}"
												th:text="|#안매움|"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div class="container mb-5">
			<div class="row">
				<div class="col">
					<h3 th:if="${f_type_theme == 'K'}">#
					   <span th:text="|한식|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<h3 th:if="${f_type_theme == 'U'}">#
					   <span th:text="|양식|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<h3 th:if="${f_type_theme == 'C'}">#
					   <span th:text="|중식|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<h3 th:if="${f_type_theme == 'J'}">#
					   <span th:text="|일식|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<h3 th:if="${f_type_theme == 'E'}">#
					   <span th:text="|기타|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<h3 th:if="${f_type_theme == 'D'}">#
					   <span th:text="|디저트|" class="text-primary"></span>
					   <span>추천</span>
					</h3>
					<hr />
					<div class="row">
						<div class="col-6 col-md-4 col-lg-4 col-xl-3 mb-2" th:each="food : ${randomThemeFoods}">
							<input type="hidden" class="f_seq" th:value="${food.f_seq}" />
							<div class="card border border-light h-100">
								<a th:href="@{/food/view(f_code=${food.f_code})}">
									<img th:src="@{${food.f_image}}" class="card-img-top" alt="..."
										style="object-fit: cover;" />
								</a>
								<div class="card-body">
									<div class="card-title pb-1 border-bottom border-light">
										<a th:href="@{/food/view(f_code=${food.f_code})}"
											class="text-dark text-decoration-none">
											<span class="fs-5" th:text="${food.f_name}"></span>
										</a>
									</div>
									<div class="card-text text-muted small">
										<div class="pb-2 text-truncate">
											<span th:text="${food.f_recipe}"></span>
										</div>
										<div class="text-muted">
											<p>
												<i class="fa-solid fa-heart text-primary"></i> <span class="f_heart me-2"></span>
												<i class="fa-solid fa-comment text-secondary"></i> <span class="f_reply"></span>
											</p>
										</div>
										<div>
											<span class="R_category" th:if="${food.f_type_theme == 'K'}"
												th:text="|#한식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'U'}"
												th:text="|#양식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'C'}"
												th:text="|#중식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'J'}"
												th:text="|#일식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'E'}"
												th:text="|#기타|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'D'}"
												th:text="|#디저트|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'R'}"
												th:text="|#밥|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'B'}"
												th:text="|#빵|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'N'}"
												th:text="|#면|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'M'}"
												th:text="|#육류|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'S'}"
												th:text="|#해산물|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'V'}"
												th:text="|#채식|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'Y'}"
												th:text="|#국물있음|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'N'}"
												th:text="|#국물없음|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'Y'}"
												th:text="|#매움|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'N'}"
												th:text="|#안매움|"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>




		<div class="container mb-5">
			<div class="row">
				<div class="col">
					<h3 th:text="${foodSetTitle}"></h3>
					<hr />
					<div class="row">
						<div class="col-6 col-md-4 col-lg-4 col-xl-3 mb-2" th:each="food : ${foodSetList}">
							<input type="hidden" class="f_seq" th:value="${food.f_seq}" />
							<div class="card border border-light h-100">
								<a th:href="@{/food/view(f_code=${food.f_code})}">
									<img th:src="@{${food.f_image}}" class="card-img-top" alt="..."
										style="object-fit: cover;" />
								</a>
								<div class="card-body">
									<div class="card-title pb-1 border-bottom border-light">
										<a th:href="@{/food/view(f_code=${food.f_code})}"
											class="text-dark text-decoration-none">
											<span class="fs-5" th:text="${food.f_name}"></span>
										</a>
									</div>
									<div class="card-text text-muted small">
										<div class="pb-2 text-truncate">
											<span th:text="${food.f_recipe}"></span>
										</div>
										<div class="text-muted">
											<p>
												<i class="fa-solid fa-heart text-primary"></i> <span class="f_heart me-2"></span>
												<i class="fa-solid fa-comment text-secondary"></i> <span class="f_reply"></span>
											</p>
										</div>
										<div>
											<span class="R_category" th:if="${food.f_type_theme == 'K'}"
												th:text="|#한식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'U'}"
												th:text="|#양식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'C'}"
												th:text="|#중식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'J'}"
												th:text="|#일식|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'E'}"
												th:text="|#기타|"></span>
											<span class="R_category" th:if="${food.f_type_theme == 'D'}"
												th:text="|#디저트|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'R'}"
												th:text="|#밥|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'B'}"
												th:text="|#빵|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'N'}"
												th:text="|#면|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'M'}"
												th:text="|#육류|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'S'}"
												th:text="|#해산물|"></span>
											<span class="R_category" th:if="${food.f_type_main == 'V'}"
												th:text="|#채식|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'Y'}"
												th:text="|#국물있음|"></span>
											<span class="R_category" th:if="${food.f_type_soup == 'N'}"
												th:text="|#국물없음|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'Y'}"
												th:text="|#매움|"></span>
											<span class="R_category" th:if="${food.f_type_spicy == 'N'}"
												th:text="|#안매움|"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div id="btnTop">
			<i class="fa-solid fa-arrow-up"></i>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
		<script th:src="@{/js/main.js}"></script>
		<script th:src="@{/js/search.js}"></script>
		 <!-- 로그인 상태를 JavaScript로 전달 -->
		<script th:inline="javascript">
		    /*<![CDATA[*/
		    var isLoggedIn = /*[[${isLoggedIn}]]*/ 'false';
		    isLoggedIn = isLoggedIn === 'true';
		    /*]]>*/
		</script>
		<script>
		document.querySelectorAll(".logincheck").forEach(btn => {
		    btn.addEventListener("click", function(e) {
		        if (!isLoggedIn) {
		            e.preventDefault(); // 버튼의 기본 동작을 중단
		            alert('로그인이 필요합니다.');
		            window.location.href = '/user/login'; // 로그인 페이지로 리다이렉트
		        }
		    });
		});
		</script>
	</div>
</body>

</html>